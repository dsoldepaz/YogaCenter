!function(a){function b(b,c){function d(a){var b={text:/^[a-zA-Z'][a-zA-Z-' ]+[a-zA-Z']?$/,email:/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i},c=a.val();return b[a.attr("type")].test(c)&&c!==a.data("defVal")}function e(){return f?!1:(f=!0,void a.ajax({type:"POST",url:c.mailHandlerURL,data:{name:h.length?h.val():i.val().split("@")[0],email:i.val(),owner_email:c.ownerEmail,sitename:c.sitename||c.ownerEmail.split("@")[1]},success:function(a){f=!1,k.slideDown(400,function(){j.focus(),b.trigger("reset"),h.add(i).data({wtch:!0}),setTimeout(function(){k.fadeOut(400)},1e3)})}}))}var f,g,h=a(".name>input",b),i=a(".email>input",b),j=a('a[data-type="submit"]',b),k=a(".success",b).hide();c=a.extend({ownerEmail:"#",mailHandlerURL:"bat/MailHandler-sub.php"},c),j.click(function(){return g=!0,h.add(i).trigger("keyup"),a(".invalid",b).length||e(),!1}),b[b.on?"on":"bind"]("keyup",function(c){if(13===c.keyCode){if(h.add(i).data({wtch:!0}).trigger("keyup"),!a(".invalid",b).length)return e(),!1;a(".invalid",b).focus()}}),h.add(i).data({wtch:!0}).each(function(){var b=a(this),c=b.val();b.data({defVal:c}).focus(function(){b.val()==c&&(b.val(""),b.parents("label").removeClass("invalid"),b.data({wtch:!1}))}).blur(function(){""==b.val()&&b.val(c),b.data({wtch:!0}).trigger("keyup")})})[h.on?"on":"bind"]("keyup",function(b){var c=a(this);c.data("wtch")&&c.parents("label")[d(c)?"removeClass":"addClass"]("invalid")})}a.fn.sForm=function(c){return this.each(function(){b(a(this),c)})}}(jQuery),$(window).load(function(){$("#newsletter").sForm({ownerEmail:"#",sitename:"sitename.link"})});